name: Sovereign_Titan_Complete_Production
on: 
  push:
    branches: [ main ]
  workflow_dispatch: # ÙŠØ³Ù…Ø­ Ù„Ùƒ Ø¨ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ØµÙ†Ø¹ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ø¨Ø¶ØºØ·Ø© Ø²Ø±

jobs:
  production:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout Repository
        uses: actions/checkout@v4

      - name: ğŸ Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: ğŸ§  Install Ollama & Llama 3 (Local AI)
        run: |
          curl -fsSL https://ollama.com/install.sh | sh
          ollama serve & 
          sleep 15
          ollama pull llama3:8b

      - name: ğŸ“¦ Install Dependencies
        run: |
          pip install -r requirements.txt
          pip install buildozer cython

      - name: ğŸ›°ï¸ Run Sovereign Factory (Research, AI, Code)
        run: python main.py

      - name: ğŸ› ï¸ Build Android APK (Buildozer)
        run: |
          # Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ ÙŠØ­ØªØ§Ø¬ ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù buildozer.spec ÙÙŠ Ù…Ø´Ø±ÙˆØ¹Ùƒ
          # Ø³Ù†Ù‚ÙˆÙ… Ø¨ØªØ´ØºÙŠÙ„ Ø¨Ù†Ø§Ø¡ ØªØ¬Ø±ÙŠØ¨ÙŠ Ø³Ø±ÙŠØ¹
          yes | buildozer -v android debug
        continue-on-error: true # Ù„Ø¶Ù…Ø§Ù† Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø§Ù„Ø¹Ù…Ù„ Ø­ØªÙ‰ Ù„Ùˆ ØªØ£Ø®Ø± Ø§Ù„Ø¨Ù†Ø§Ø¡

      - name: ğŸ‘‘ Upload Ready APK
        uses: actions/upload-artifact@v4
        with:
          name: Sovereign_Titan_Game_APK
          path: bin/*.apk

