name: Sovereign_Titan_Final_Success
on: 
  push:
    branches: [ main ]
  workflow_dispatch:

permissions:
  contents: write

jobs:
  production:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout Repository
        uses: actions/checkout@v4

      - name: ğŸ Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: ğŸ“¦ Install Dependencies
        run: |
          pip install requests beautifulsoup4 pyyaml kivymd kivy buildozer cython

      - name: ğŸ›°ï¸ Run Sovereign Factory (Research & Design)
        run: python main.py

      - name: ğŸ› ï¸ Build Android APK
        run: |
          # Ø¨Ù†Ø§Ø¡ Ù…Ù„Ù APK Ø³Ø±ÙŠØ¹
          if [ -f buildozer.spec ]; then
            yes | buildozer -v android debug
          else
            echo "No spec file, skipping APK..."
          fi
        continue-on-error: true

      - name: ğŸ‘‘ Upload Result
        uses: actions/upload-artifact@v4
        with:
          name: Sovereign_Titan_Package
          path: |
            games/
            concepts/
            bin/*.apk
